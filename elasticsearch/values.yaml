clusterName: "elasticsearch"
nodeGroup: "master"

image: "elasticsearch"
imageTag: 8.5.1
imagePullPolicy: IfNotPresent

# --- KEY FIX FOR SINGLE NODE ---
extraEnvs:
  - name: "discovery.type"
    value: "single-node"

replicas: 1
minimumMasterNodes: 

# Resource adjustments (Bumped to 2Gi for stability)
resources:
  requests:
    cpu: "500m"
    memory: "2Gi"
  limits:
    cpu: "1000m"
    memory: "2Gi"

esJavaOpts: "-Xmx1g -Xms1g"

roles:
  - master
  - data
  - data_content
  - data_hot
  - ingest
  - remote_cluster_client

volumeClaimTemplate:
  accessModes: ["ReadWriteOnce"]
  resources:
    requests:
      storage: 5Gi

createCert: true

service:
  type: ClusterIP
  httpPort: 9200

sysctlInitContainer:
  enabled: false

# Accept 'yellow' status because a 1-node cluster can never be 'green'
clusterHealthCheckParams: "wait_for_status=yellow&timeout=1s"

readinessProbe:
  initialDelaySeconds: 90 # Increased to give JVM time to fully start
  periodSeconds: 10
  successThreshold: 3
  timeoutSeconds: 5