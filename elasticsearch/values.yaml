clusterName: "elasticsearch"
nodeGroup: "master"

image: "docker.elastic.co/elasticsearch/elasticsearch"
imageTag: "8.5.1"
imagePullPolicy: "IfNotPresent"

# 1. This is the mandatory mode for 1-node clusters
extraEnvs:
  - name: "discovery.type"
    value: "single-node"

# 2. THE SECRET FIX: This prevents the Helm chart from 
# injecting the problematic cluster.initial_master_nodes
cluster:
  initial_master_nodes: [] 

# 3. Explicitly set to 1 and remove any other discovery settings
replicas: 1
minimumMasterNodes: null

# 4. Resources for Mac/Rancher stability
resources:
  requests:
    cpu: "500m"
    memory: "2Gi"
  limits:
    cpu: "1000m"
    memory: "2Gi"

esJavaOpts: "-Xmx1g -Xms1g"

# Disable the init container since we run it manually
sysctlInitContainer:
  enabled: false

# Accept 'yellow' health status
clusterHealthCheckParams: "wait_for_status=yellow&timeout=1s"

readinessProbe:
  initialDelaySeconds: 120
  periodSeconds: 60